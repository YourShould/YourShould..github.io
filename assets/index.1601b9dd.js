import{g as R,h as p}from"./moment.7e0d4702.js";import{d as w,r as O,u as y,o as D,c as s,a as r,b as U,F as L,i as N,_ as F}from"./index.fdf04471.js";import{u as V}from"./detail.2c048776.js";import{_ as C}from"./index.vue_vue_type_script_lang.3e866388.js";import{u as j}from"./setting.aa29e6ad.js";function E(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!N(n)}const I=w({setup(){const n=V(),c=j(),a=O({list:[],active:0}),{DEV:d}={BASE_URL:"/test/",MODE:"production",DEV:!1,PROD:!0};let i=JSON.parse(window.localStorage.getItem("read")||"[]");const l=y();D(()=>{_()});const f=e=>{let t=e.split("/");return t[2]?t=t[2]:t="",t},g=()=>{var e;c.domain&&((e=a.list)==null||e.forEach(t=>{var o;t.imgURL=(o=t.imgURL)==null?void 0:o.replace(f(t.imgURL),c.domain)}))},_=()=>{R().then(e=>{const t=JSON.parse(decodeURIComponent(e.data));console.log(t,123),a.list=t.sort(S("date","asc")),g()})},v=()=>{l.push({name:"new"})},b=e=>{n.item=e,window.sessionStorage.setItem("item",JSON.stringify(e));const{title:t}=e,o=t.split("_")[0];i.push(o),i=Array.from(new Set(i)),l.push({name:"detail"}),window.localStorage.setItem("read",JSON.stringify(i)),l.push({name:"detail"})},S=(e,t="desc")=>(o,x)=>{const u=p(o[e]).valueOf(),m=p(x[e]).valueOf();return t==="desc"?u-m:m-u},h=e=>{const t=e.split("_");return i.some(o=>o===t[0])};return()=>{let e;return s(L,null,[s("div",{class:"flexbox column box"},[s(r("van-nav-bar"),{title:"\u6700\u65B0","right-text":"\u66F4\u591A",onClickRight:v},null),s("div",{class:"flex content"},[s(r("van-grid"),{border:!1,"column-num":2},E(e=a.list.slice(0,10).map(t=>s(r("van-grid-item"),{onClick:()=>b(t)},{default:()=>[s(r("van-image"),{class:"img",src:d?"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg":t.imgURL},null),s("p",{class:"title"},[h(t.title)&&s(r("van-tag"),{class:"mr10",plain:!0,type:"warning"},{default:()=>[U("\u5DF2\u9605")]}),d?t.title2:t.title]),s("div",{class:"date"},[t.date])]})))?e:{default:()=>[e]})]),s(C,{modelValue:a.active,"onUpdate:modelValue":t=>a.active=t},null)])])}}});const P=F(I,[["__scopeId","data-v-16bbfb8e"]]);export{P as default};
